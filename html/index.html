<html><head>
    <meta charset="UTF-8">
    <title>Title of the document</title>
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <script src="js/jquery-3.5.1.js" type="text/javascript"></script>
    <script src="js/howler.min.js" type="text/javascript"></script>
    
    <link type="text/css" rel="stylesheet" href="css/main.css" />
    <style>
    
    </style>
    </head>
    
    <body>

        <div id="timer">08:59</div>


        <div id="scoreboard-container">
            <table class="scoreboard">
                <thead>
                    <tr>
                        <td>Player</td>
                        <td>Kills</td>
                        <td>Deaths</td>
                    </tr>
                </thead>
                
                <tbody>
                    <tr>
                        <td>Aaron</td>
                        <td>7</td>
                        <td>6</td>
                    </tr>
                </tbody>
            </table>
        </div>

    <script type="text/javascript">
    var sndDeath = new Howl({src: ['sounds/death.ogg'],volume: 0.3});
    
    $(function() {       
        window.addEventListener('message', function(event) {
            switch(event.data.name) {
                case "playDeathSound":
                    sndDeath.play();
                break;
                case "onRoundEnd":
                    document.getElementById("scoreboard-container").style.display = "flex";
                break;
                case "onResetRound":
                document.getElementById("scoreboard-container").style.display = "none";
                break;
                
            }

        });
    });


    function UpdateTime(sec_num) {
        var timerDiv = document.getElementById("timer");

        var sec_num = parseInt(sec_num, 10); // don't forget the second param
        var hours   = Math.floor(sec_num / 3600);
        var minutes = Math.floor((sec_num - (hours * 3600)) / 60);
        var seconds = sec_num - (hours * 3600) - (minutes * 60);

        if (hours   < 10) {hours   = "0"+hours;}
        if (minutes < 10) {minutes = "0"+minutes;}
        if (seconds < 10) {seconds = "0"+seconds;}

        timerDiv.innerHTML =  hours+':'+minutes+':'+seconds;
    }

    setInterval(function() {
        // browser-side JS
        fetch(`https://${GetParentResourceName()}/getRoundTimeLeft`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=UTF-8',
            },
            body: JSON.stringify({
                itemId: 'my-item'
            })
        }).then(resp => resp.json()).then(resp => UpdateTime(Number(resp)));        
    }, 1000);
    </script>
    
    <script>
    //$(function() {window.dispatchEvent( new Event('message') );});
    //openPhone();
    </script>
    
    </body>
    </html>